<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 12_Flask와 Vue를 API로 연결하기</title>
    
    <style>
    body {
        font-family: 'Malgun Gothic', '맑은 고딕', 'Noto Sans CJK KR', 'Dotum', '돋움', 'Gulim', '굴림', Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 20px;
        background-color: #fff;
    }
    
    h1, h2, h3, h4, h5, h6 {
        color: #2c3e50;
        margin-top: 2em;
        margin-bottom: 1em;
        text-align: left;
    }
    
    h1 {
        border-bottom: 3px solid #3498db;
        padding-bottom: 10px;
        text-align: center;
        margin-bottom: 2em;
    }
    
    h2 {
        border-bottom: 2px solid #ecf0f1;
        padding-bottom: 8px;
    }
    
    p {
        margin-bottom: 1em;
        text-align: justify;
    }
    
    code {
        background-color: #f1f3f4;
        border: 1px solid #e1e4e8;
        border-radius: 3px;
        padding: 2px 6px;
        font-family: 'Consolas', 'Monaco', 'Courier New', 'D2Coding', 'Nanum Gothic Coding', monospace;
        font-size: 0.9em;
        color: #24292e;
    }
    
    pre {
        background-color: #f6f8fa;
        border: 1px solid #e1e4e8;
        border-radius: 6px;
        padding: 16px;
        overflow-x: auto;
        margin: 1em 0;
        line-height: 1.45;
        font-family: 'Consolas', 'Monaco', 'Courier New', 'D2Coding', 'Nanum Gothic Coding', monospace;
    }
    
    pre code {
        background: none;
        border: none;
        padding: 0;
        color: inherit;
        font-size: 0.9em;
    }
    
    /* Enhanced syntax highlighting support */
    .highlight {
        background-color: #f6f8fa;
        border-radius: 6px;
        margin: 1em 0;
    }
    
    .highlight pre {
        background: none;
        border: none;
        margin: 0;
    }
    
    /* Fix Vue.js template syntax highlighting issues */
    .highlight .err {
        background: none !important;
        border: none !important;
        color: #24292e !important;
    }
    
    /* Override error highlighting for Vue directives */
    .highlight .nt {
        color: #22863a;
    }
    
    .highlight .na {
        color: #6f42c1;
    }
    
    table {
        border-collapse: collapse;
        width: 100%;
        margin: 1.5em auto;
    }
    
    table th, table td {
        border: 1px solid #ddd;
        padding: 12px 8px;
        text-align: left;
    }
    
    table th {
        background-color: #f2f2f2;
        font-weight: bold;
        text-align: center;
    }
    
    blockquote {
        border-left: 4px solid #3498db;
        margin: 1em 0;
        padding-left: 20px;
        color: #7f8c8d;
        font-style: italic;
    }
    
    ul, ol {
        margin: 1em 0;
        padding-left: 2em;
    }
    
    li {
        margin-bottom: 0.5em;
    }
    
    hr {
        border: none;
        height: 2px;
        background-color: #ecf0f1;
        margin: 3em 0;
    }
    
    img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 1em auto;
        border-radius: 5px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .highlight {
        background-color: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 5px;
        padding: 10px;
        margin: 1em 0;
    }
    
    @media print {
        body {
            max-width: none;
            margin: 0;
            padding: 20px;
        }
    }
    </style>
    
</head>
<body>
    <h1 id="chapter-11-flask-vue-api">Chapter 11: Flask와 Vue를 API로 연결하기</h1>
<h2 id="_1">들어가며</h2>
<p>웹 애플리케이션은 프론트엔드와 백엔드가 서로 통신하며 작동합니다. 이 장에서는 Flask 백엔드와 Vue.js 프론트엔드를 API를 통해 연결하는 방법을 배우고, 특히 <strong>환경별 설정 관리의 중요성</strong>을 이해하게 됩니다.</p>
<h2 id="1">1. 전체 아키텍처 이해</h2>
<h3 id="11">1.1 시스템 구조</h3>
<div class="highlight"><pre><span></span><code>┌─────────────────┐    HTTP Request     ┌──────────────────┐
│                 │ ──────────────────► │                  │
│   Vue.js        │                     │   Flask API      │
│   Frontend      │ ◄────────────────── │   Backend        │
│   (Port 3000)   │    JSON Response    │   (Port 5000)    │
└─────────────────┘                     └──────────────────┘
</code></pre></div>

<ul>
<li><strong>프론트엔드 (Vue.js)</strong>: 사용자 인터페이스, 데이터 시각화</li>
<li><strong>백엔드 (Flask)</strong>: 데이터 처리, 비즈니스 로직, 파일 관리</li>
<li><strong>API</strong>: RESTful API를 통한 JSON 데이터 교환</li>
<li><strong>CORS</strong>: Cross-Origin Resource Sharing 설정으로 서로 다른 포트 간 통신 허용</li>
</ul>
<h3 id="12-wsgi-flask">1.2 WSGI 이해하기 (Flask 운영 환경)</h3>
<p>WSGI(Web Server Gateway Interface)는 Python 웹 애플리케이션의 표준 인터페이스입니다. 이를 전기 규격에 비유하면:</p>
<ul>
<li><strong>WSGI</strong>: 전기 규격 (220V, 60Hz) - 표준 인터페이스</li>
<li><strong>웹 서버 (Gunicorn, uWSGI)</strong>: 발전소와 콘센트 - HTTP 요청을 받아 처리</li>
<li><strong>Flask</strong>: TV나 냉장고 같은 가전제품 - 실제 애플리케이션 로직</li>
</ul>
<p>이 표준 덕분에 Flask 애플리케이션을 다양한 웹 서버에서 실행할 수 있습니다. 회사 내에서는 주로 uWSGI를 사용하며, <code>uwsgi.ini</code> 파일을 통해 세부 설정을 관리합니다.</p>
<h2 id="2-flask-api">2. Flask API 서버 구축</h2>
<h3 id="21-flask">2.1 기본 Flask 서버 설정</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># app.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">flask_cors</span><span class="w"> </span><span class="kn">import</span> <span class="n">CORS</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dotenv</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_dotenv</span>

<span class="c1"># .env 파일에서 환경 변수 로드</span>
<span class="n">load_dotenv</span><span class="p">()</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># 환경별 CORS 설정 - 이것이 왜 중요한지 설명합니다</span>
<span class="n">is_development</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;FLASK_ENV&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;development&#39;</span>

<span class="k">if</span> <span class="n">is_development</span><span class="p">:</span>
    <span class="c1"># 개발 환경: localhost 허용</span>
    <span class="n">origins</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;DEV_CORS_ORIGINS&#39;</span><span class="p">,</span> <span class="s1">&#39;http://localhost:3000&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* 개발 모드 실행 중. 허용된 Origins:&quot;</span><span class="p">,</span> <span class="n">origins</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># 운영 환경: 실제 도메인만 허용</span>
    <span class="n">origins</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;PROD_CORS_ORIGINS&#39;</span><span class="p">,</span> <span class="s1">&#39;https://afm.skhynix.com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* 운영 모드 실행 중. 허용된 Origins:&quot;</span><span class="p">,</span> <span class="n">origins</span><span class="p">)</span>

<span class="n">CORS</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">resources</span><span class="o">=</span><span class="p">{</span><span class="sa">r</span><span class="s2">&quot;/api/*&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;origins&quot;</span><span class="p">:</span> <span class="n">origins</span><span class="p">}},</span> <span class="n">supports_credentials</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 기본 헬스체크 엔드포인트</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/health&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">health_check</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Flask API 서버가 정상 작동 중입니다&#39;</span><span class="p">,</span>
        <span class="s1">&#39;environment&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;FLASK_ENV&#39;</span><span class="p">,</span> <span class="s1">&#39;production&#39;</span><span class="p">)</span>
    <span class="p">})</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="n">is_development</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</code></pre></div>

<h3 id="22-env">2.2 환경 변수 설정 (.env 파일의 중요성)</h3>
<p><strong>.env 파일을 사용하는 이유:</strong></p>
<ol>
<li><strong>보안</strong>: API 키, 비밀번호 등을 코드에서 분리</li>
<li><strong>유연성</strong>: 코드 수정 없이 환경별 설정 변경</li>
<li><strong>협업</strong>: 각 개발자가 자신만의 설정 사용 가능</li>
<li><strong>배포</strong>: 서버별로 다른 설정 적용 가능</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># .env 파일 (Git에 포함시키지 않음!)</span>

<span class="c1"># Flask 환경 설정</span>
<span class="nv">FLASK_ENV</span><span class="o">=</span>development

<span class="c1"># 개발 환경 CORS 설정</span>
<span class="nv">DEV_CORS_ORIGINS</span><span class="o">=</span>http://localhost:3000,http://127.0.0.1:3000

<span class="c1"># 운영 환경 CORS 설정</span>
<span class="nv">PROD_CORS_ORIGINS</span><span class="o">=</span>https://afm.skhynix.com

<span class="c1"># 비밀 키 (세션, CSRF 보호용)</span>
<span class="nv">SECRET_KEY</span><span class="o">=</span>your-secret-key-here

<span class="c1"># 데이터베이스 설정 (예시)</span>
<span class="nv">DATABASE_URL</span><span class="o">=</span>sqlite:///dev.db
</code></pre></div>

<h3 id="23-afm-api">2.3 AFM 데이터 API 구현</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># app.py에 추가</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># AFM 측정 데이터 API</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/afm-files&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_afm_files</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AFM 측정 파일 목록을 반환합니다&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># 실제로는 데이터베이스나 파일에서 읽어옴</span>
        <span class="n">dummy_afm_data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="s1">&#39;240618_FSOXCMP_DISHING_9PT_T7HQR42TA_21_1&#39;</span><span class="p">,</span>
                <span class="s1">&#39;recipe_name&#39;</span><span class="p">:</span> <span class="s1">&#39;FSOXCMP_DISHING_9PT&#39;</span><span class="p">,</span>
                <span class="s1">&#39;lot_id&#39;</span><span class="p">:</span> <span class="s1">&#39;T7HQR42TA&#39;</span><span class="p">,</span>
                <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-06-18&#39;</span><span class="p">,</span>
                <span class="s1">&#39;roughness&#39;</span><span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
                <span class="s1">&#39;tool&#39;</span><span class="p">:</span> <span class="s1">&#39;MAP608&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="s1">&#39;240617_OXIDE_ETCH_3PT_T8HQR43TB_15_1&#39;</span><span class="p">,</span>
                <span class="s1">&#39;recipe_name&#39;</span><span class="p">:</span> <span class="s1">&#39;OXIDE_ETCH_3PT&#39;</span><span class="p">,</span>
                <span class="s1">&#39;lot_id&#39;</span><span class="p">:</span> <span class="s1">&#39;T8HQR43TB&#39;</span><span class="p">,</span>
                <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-06-17&#39;</span><span class="p">,</span>
                <span class="s1">&#39;roughness&#39;</span><span class="p">:</span> <span class="mf">2.1</span><span class="p">,</span>
                <span class="s1">&#39;tool&#39;</span><span class="p">:</span> <span class="s1">&#39;MAP608&#39;</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="c1"># 검색 기능</span>
        <span class="n">search</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;search&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">search</span><span class="p">:</span>
            <span class="n">dummy_afm_data</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dummy_afm_data</span>
                <span class="k">if</span> <span class="n">search</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span>
                   <span class="n">search</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;recipe_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="p">]</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">dummy_afm_data</span><span class="p">,</span>
            <span class="s1">&#39;total_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">dummy_afm_data</span><span class="p">),</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="p">})</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;데이터 조회 중 오류: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">}),</span> <span class="mi">500</span>

<span class="c1"># 특정 AFM 파일의 상세 데이터</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/afm-files/&lt;int:file_id&gt;&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_afm_file_detail</span><span class="p">(</span><span class="n">file_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;특정 AFM 파일의 상세 정보를 반환합니다&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># 실제로는 데이터베이스에서 조회</span>
        <span class="k">if</span> <span class="n">file_id</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">detailed_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="s1">&#39;240618_FSOXCMP_DISHING_9PT_T7HQR42TA_21_1&#39;</span><span class="p">,</span>
                <span class="s1">&#39;recipe_name&#39;</span><span class="p">:</span> <span class="s1">&#39;FSOXCMP_DISHING_9PT&#39;</span><span class="p">,</span>
                <span class="s1">&#39;lot_id&#39;</span><span class="p">:</span> <span class="s1">&#39;T7HQR42TA&#39;</span><span class="p">,</span>
                <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-06-18&#39;</span><span class="p">,</span>
                <span class="s1">&#39;summary&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;mean_roughness&#39;</span><span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
                    <span class="s1">&#39;std_roughness&#39;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">,</span>
                    <span class="s1">&#39;min_roughness&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
                    <span class="s1">&#39;max_roughness&#39;</span><span class="p">:</span> <span class="mf">1.5</span>
                <span class="p">},</span>
                <span class="s1">&#39;measurement_points&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1_UL&#39;</span><span class="p">,</span> <span class="s1">&#39;2_UC&#39;</span><span class="p">,</span> <span class="s1">&#39;3_UR&#39;</span><span class="p">,</span> <span class="s1">&#39;4_ML&#39;</span><span class="p">,</span> <span class="s1">&#39;5_MC&#39;</span><span class="p">],</span>
                <span class="s1">&#39;profile_available&#39;</span><span class="p">:</span> <span class="kc">True</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">detailed_data</span>
            <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;ID </span><span class="si">{</span><span class="n">file_id</span><span class="si">}</span><span class="s1">인 파일을 찾을 수 없습니다&#39;</span>
            <span class="p">}),</span> <span class="mi">404</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;파일 상세 정보 조회 중 오류: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">}),</span> <span class="mi">500</span>
</code></pre></div>

<h2 id="3-vuejs-api">3. Vue.js에서 API 통신하기</h2>
<h3 id="31-vue">3.1 Vue 환경 변수 설정</h3>
<p>Vue에서도 환경별 설정을 관리하는 것이 중요합니다. <strong>주의: Vite를 사용하는 Vue 프로젝트에서는 반드시 <code>VITE_</code> 접두사를 붙여야 환경 변수를 사용할 수 있습니다.</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># .env.development (개발 환경)</span>
<span class="nv">VITE_API_BASE_URL</span><span class="o">=</span>http://localhost:5000/api
<span class="nv">VITE_APP_TITLE</span><span class="o">=</span>AFM<span class="w"> </span>Data<span class="w"> </span>Platform<span class="w"> </span><span class="o">(</span>Development<span class="o">)</span>

<span class="c1"># .env.production (운영 환경)</span>
<span class="nv">VITE_API_BASE_URL</span><span class="o">=</span>https://afm.skhynix.com/api
<span class="nv">VITE_APP_TITLE</span><span class="o">=</span>AFM<span class="w"> </span>Data<span class="w"> </span>Platform
</code></pre></div>

<p>환경 변수 사용 시 주의사항:</p>
<ul>
<li>반드시 <code>VITE_</code> 접두사 사용</li>
<li><code>import.meta.env.VITE_변수명</code> 형태로 접근</li>
<li><code>.env</code> 파일 수정 후 개발 서버 재시작 필요</li>
</ul>
<h3 id="32-axios-api">3.2 Axios를 사용한 API 서비스</h3>
<div class="highlight"><pre><span></span><code><span class="c1">// src/services/api.js</span>
<span class="k">import</span><span class="w"> </span><span class="nx">axios</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;axios&quot;</span><span class="p">;</span>

<span class="c1">// 환경 변수에서 API URL 가져오기</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">API_BASE_URL</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VITE_API_BASE_URL</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">&quot;http://localhost:5000/api&quot;</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;API Base URL:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">API_BASE_URL</span><span class="p">);</span>

<span class="c1">// Axios 인스턴스 생성</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">apiClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
<span class="w">  </span><span class="nx">baseURL</span><span class="o">:</span><span class="w"> </span><span class="nx">API_BASE_URL</span><span class="p">,</span>
<span class="w">  </span><span class="nx">timeout</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="p">,</span>
<span class="w">  </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;Content-Type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">});</span>

<span class="c1">// 요청 인터셉터 (디버깅용)</span>
<span class="nx">apiClient</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
<span class="w">  </span><span class="p">(</span><span class="nx">config</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`📡 API 요청: </span><span class="si">${</span><span class="nx">config</span><span class="p">.</span><span class="nx">method</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">config</span><span class="p">.</span><span class="nx">url</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">config</span><span class="p">;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;❌ 요청 오류:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">);</span>

<span class="c1">// 응답 인터셉터 (에러 처리)</span>
<span class="nx">apiClient</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
<span class="w">  </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`✅ API 응답: </span><span class="si">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">url</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;❌ 응답 오류:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 네트워크 오류 처리</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;서버에 연결할 수 없습니다. 네트워크를 확인해주세요.&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// HTTP 상태 코드별 처리</span>
<span class="w">      </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mf">404</span><span class="o">:</span>
<span class="w">          </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;요청한 데이터를 찾을 수 없습니다.&quot;</span><span class="p">;</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mf">500</span><span class="o">:</span>
<span class="w">          </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;서버 내부 오류가 발생했습니다.&quot;</span><span class="p">;</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">default</span><span class="o">:</span>
<span class="w">          </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">&quot;알 수 없는 오류가 발생했습니다.&quot;</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">);</span>

<span class="c1">// API 서비스 함수들</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">apiService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 헬스체크</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">healthCheck</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">apiClient</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/health&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="c1">// AFM 파일 목록 조회</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">getAfmFiles</span><span class="p">(</span><span class="nx">search</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">apiClient</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/afm-files&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">params</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">search</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
<span class="w">        </span><span class="nx">totalCount</span><span class="o">:</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">total_count</span><span class="p">,</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
<span class="w">        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="c1">// AFM 파일 상세 정보 조회</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">getAfmFileDetail</span><span class="p">(</span><span class="nx">fileId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">apiClient</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`/afm-files/</span><span class="si">${</span><span class="nx">fileId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">apiClient</span><span class="p">;</span>
</code></pre></div>

<h3 id="33-pinia-store-api">3.3 Pinia Store에서 API 사용</h3>
<div class="highlight"><pre><span></span><code><span class="c1">// src/stores/dataStore.js</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">defineStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;pinia&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">computed</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;vue&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">apiService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@/services/api.js&quot;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useDataStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 상태</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">measurements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">isLoading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lastUpdated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 계산된 속성</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">measurementCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">measurements</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">averageRoughness</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">measurements</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">measurements</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span><span class="w"> </span><span class="nx">m</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">acc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">m</span><span class="p">.</span><span class="nx">roughness</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">sum</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">measurements</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// AFM 파일 목록 로드</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadMeasurements</span><span class="p">(</span><span class="nx">search</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">isLoading</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="nx">error</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;📊 AFM 측정 파일 목록을 로드합니다...&quot;</span><span class="p">);</span>

<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">apiService</span><span class="p">.</span><span class="nx">getAfmFiles</span><span class="p">(</span><span class="nx">search</span><span class="p">);</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">measurements</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="w">        </span><span class="nx">lastUpdated</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">();</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`✅ </span><span class="si">${</span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb">개의 측정 파일을 로드했습니다`</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">error</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;❌ 측정 파일 로드 실패:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// 사용자에게 친화적인 에러 메시지</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s2">&quot;네트워크&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">error</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Flask 서버가 실행 중인지 확인해주세요 (포트 5000)&quot;</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">isLoading</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// 특정 측정 파일의 상세 데이터 로드</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadMeasurementDetail</span><span class="p">(</span><span class="nx">fileId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`📊 측정 파일 상세 정보 로드: </span><span class="si">${</span><span class="nx">fileId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">apiService</span><span class="p">.</span><span class="nx">getAfmFileDetail</span><span class="p">(</span><span class="nx">fileId</span><span class="p">);</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`✅ 파일 </span><span class="si">${</span><span class="nx">fileId</span><span class="si">}</span><span class="sb"> 상세 정보 로드 완료`</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`❌ 파일 </span><span class="si">${</span><span class="nx">fileId</span><span class="si">}</span><span class="sb"> 상세 정보 로드 실패:`</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="nx">err</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// 데이터 초기화</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">clearData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">measurements</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">    </span><span class="nx">error</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="nx">lastUpdated</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 상태</span>
<span class="w">    </span><span class="nx">measurements</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isLoading</span><span class="p">,</span>
<span class="w">    </span><span class="nx">error</span><span class="p">,</span>
<span class="w">    </span><span class="nx">lastUpdated</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// 계산된 속성</span>
<span class="w">    </span><span class="nx">measurementCount</span><span class="p">,</span>
<span class="w">    </span><span class="nx">averageRoughness</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// 액션</span>
<span class="w">    </span><span class="nx">loadMeasurements</span><span class="p">,</span>
<span class="w">    </span><span class="nx">loadMeasurementDetail</span><span class="p">,</span>
<span class="w">    </span><span class="nx">clearData</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">});</span>
</code></pre></div>

<h2 id="4-afm">4. 실전 예제: AFM 데이터 대시보드</h2>
<h3 id="41">4.1 메인 페이지 컴포넌트</h3>
<div class="highlight"><pre><span></span><code><span class="c1">// src/pages/AfmDashboard.vue</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;afm-dashboard&quot;</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">AFM</span><span class="w"> </span><span class="nx">측정</span><span class="w"> </span><span class="nx">데이터</span><span class="w"> </span><span class="nx">대시보드</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>

<span class="w">    </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">환경</span><span class="w"> </span><span class="nx">정보</span><span class="w"> </span><span class="nx">표시</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;environment-info&quot;</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&quot;isDevelopment&quot;</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">alert</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;tonal&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="nx">개발</span><span class="w"> </span><span class="nx">모드로</span><span class="w"> </span><span class="nx">실행</span><span class="w"> </span><span class="nx">중</span><span class="w"> </span><span class="p">(</span><span class="nx">API</span><span class="o">:</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">apiUrl</span><span class="w"> </span><span class="p">}})</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/v-alert&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="w">    </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">검색</span><span class="w"> </span><span class="nx">바</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;search-section&quot;</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">text</span><span class="o">-</span><span class="nx">field</span>
<span class="w">        </span><span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&quot;searchQuery&quot;</span>
<span class="w">        </span><span class="err">@</span><span class="nx">input</span><span class="o">=</span><span class="s2">&quot;onSearch&quot;</span>
<span class="w">        </span><span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;파일명이나 레시피로 검색...&quot;</span>
<span class="w">        </span><span class="nx">prepend</span><span class="o">-</span><span class="nx">inner</span><span class="o">-</span><span class="nx">icon</span><span class="o">=</span><span class="s2">&quot;mdi-magnify&quot;</span>
<span class="w">        </span><span class="nx">clearable</span>
<span class="w">        </span><span class="err">@</span><span class="nx">click</span><span class="o">:</span><span class="nx">clear</span><span class="o">=</span><span class="s2">&quot;onSearch&quot;</span>
<span class="w">      </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="w">    </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">통계</span><span class="w"> </span><span class="nx">카드</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">row</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;mb-4&quot;</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">col</span><span class="w"> </span><span class="nx">cols</span><span class="o">=</span><span class="s2">&quot;12&quot;</span><span class="w"> </span><span class="nx">sm</span><span class="o">=</span><span class="s2">&quot;6&quot;</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">-</span><span class="nx">text</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-h5&quot;</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">dataStore</span><span class="p">.</span><span class="nx">measurementCount</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-caption&quot;</span><span class="o">&gt;</span><span class="nx">총</span><span class="w"> </span><span class="nx">측정</span><span class="w"> </span><span class="nx">수</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/v-card-text&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/v-card&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/v-col&gt;</span>

<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">col</span><span class="w"> </span><span class="nx">cols</span><span class="o">=</span><span class="s2">&quot;12&quot;</span><span class="w"> </span><span class="nx">sm</span><span class="o">=</span><span class="s2">&quot;6&quot;</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">-</span><span class="nx">text</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-h5&quot;</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">dataStore</span><span class="p">.</span><span class="nx">averageRoughness</span><span class="w"> </span><span class="p">}}</span><span class="w"> </span><span class="nx">nm</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-caption&quot;</span><span class="o">&gt;</span><span class="nx">평균</span><span class="w"> </span><span class="nx">거칠기</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/v-card-text&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/v-card&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/v-col&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/v-row&gt;</span>

<span class="w">    </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">로딩</span><span class="w"> </span><span class="nx">상태</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&quot;dataStore.isLoading&quot;</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-center pa-4&quot;</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">progress</span><span class="o">-</span><span class="nx">circular</span><span class="w"> </span><span class="nx">indeterminate</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">p</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;mt-2&quot;</span><span class="o">&gt;</span><span class="nx">데이터를</span><span class="w"> </span><span class="nx">불러오는</span><span class="w"> </span><span class="nx">중</span><span class="p">...</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="w">    </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">에러</span><span class="w"> </span><span class="nx">상태</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">alert</span>
<span class="w">      </span><span class="nx">v</span><span class="o">-</span><span class="k">else</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&quot;dataStore.error&quot;</span>
<span class="w">      </span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;error&quot;</span>
<span class="w">      </span><span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;outlined&quot;</span>
<span class="w">      </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;mb-4&quot;</span>
<span class="w">    </span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;d-flex align-center justify-space-between&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-h6&quot;</span><span class="o">&gt;</span><span class="nx">오류</span><span class="w"> </span><span class="nx">발생</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">dataStore</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">btn</span><span class="w"> </span><span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&quot;refreshData&quot;</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">다시</span><span class="w"> </span><span class="nx">시도</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/v-btn&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/v-alert&gt;</span>

<span class="w">    </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">데이터</span><span class="w"> </span><span class="nx">목록</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="k">else</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;data-grid&quot;</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">row</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">col</span>
<span class="w">          </span><span class="nx">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">&quot;item in dataStore.measurements&quot;</span>
<span class="w">          </span><span class="o">:</span><span class="nx">key</span><span class="o">=</span><span class="s2">&quot;item.id&quot;</span>
<span class="w">          </span><span class="nx">cols</span><span class="o">=</span><span class="s2">&quot;12&quot;</span>
<span class="w">          </span><span class="nx">sm</span><span class="o">=</span><span class="s2">&quot;6&quot;</span>
<span class="w">          </span><span class="nx">md</span><span class="o">=</span><span class="s2">&quot;4&quot;</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">MeasurementCard</span>
<span class="w">            </span><span class="o">:</span><span class="nx">measurement</span><span class="o">=</span><span class="s2">&quot;item&quot;</span>
<span class="w">            </span><span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&quot;viewDetail(item.id)&quot;</span>
<span class="w">          </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/v-col&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/v-row&gt;</span>

<span class="w">      </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">데이터가</span><span class="w"> </span><span class="nx">없을</span><span class="w"> </span><span class="nx">때</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&quot;dataStore.measurements.length === 0&quot;</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-center pa-8&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">icon</span><span class="w"> </span><span class="nx">size</span><span class="o">=</span><span class="s2">&quot;64&quot;</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="o">&gt;</span><span class="nx">mdi</span><span class="o">-</span><span class="nx">database</span><span class="o">-</span><span class="nx">off</span><span class="o">&lt;</span><span class="err">/v-icon&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">p</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-h6 mt-4&quot;</span><span class="o">&gt;</span><span class="nx">측정</span><span class="w"> </span><span class="nx">데이터가</span><span class="w"> </span><span class="nx">없습니다</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">p</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-caption&quot;</span><span class="o">&gt;</span><span class="nx">검색</span><span class="w"> </span><span class="nx">조건을</span><span class="w"> </span><span class="nx">변경해보세요</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="w">    </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">마지막</span><span class="w"> </span><span class="nx">업데이트</span><span class="w"> </span><span class="nx">시간</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&quot;dataStore.lastUpdated&quot;</span><span class="w"> </span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;text-caption text-center mt-4&quot;</span><span class="o">&gt;</span>
<span class="w">      </span><span class="nx">마지막</span><span class="w"> </span><span class="nx">업데이트</span><span class="o">:</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">dataStore</span><span class="p">.</span><span class="nx">lastUpdated</span><span class="p">)</span><span class="w"> </span><span class="p">}}</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">onMounted</span><span class="p">,</span><span class="w"> </span><span class="nx">computed</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useRouter</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue-router&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDataStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/dataStore.js&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">MeasurementCard</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/MeasurementCard.vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">debounce</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;lodash-es&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRouter</span><span class="p">()</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">dataStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDataStore</span><span class="p">()</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">searchQuery</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1">// 환경 정보</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">isDevelopment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DEV</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">apiUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VITE_API_BASE_URL</span>

<span class="c1">// 디바운스된 검색 함수 (과도한 API 호출 방지)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">debouncedSearch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">debounce</span><span class="p">((</span><span class="nx">query</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">dataStore</span><span class="p">.</span><span class="nx">loadMeasurements</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
<span class="p">},</span><span class="w"> </span><span class="mf">500</span><span class="p">)</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">onSearch</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">debouncedSearch</span><span class="p">(</span><span class="nx">searchQuery</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">refreshData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">dataStore</span><span class="p">.</span><span class="nx">loadMeasurements</span><span class="p">(</span><span class="nx">searchQuery</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">viewDetail</span><span class="p">(</span><span class="nx">fileId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`/afm-detail/</span><span class="si">${</span><span class="nx">fileId</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">date</span><span class="p">).</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="s1">&#39;ko-KR&#39;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 페이지 로드 시 데이터 가져오기</span>
<span class="nx">onMounted</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;AFM 대시보드 마운트됨&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="nx">dataStore</span><span class="p">.</span><span class="nx">loadMeasurements</span><span class="p">()</span>
<span class="p">})</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>

<span class="o">&lt;</span><span class="nx">style</span><span class="w"> </span><span class="nx">scoped</span><span class="o">&gt;</span>
<span class="p">.</span><span class="nx">afm</span><span class="o">-</span><span class="nx">dashboard</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="mf">20</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nx">environment</span><span class="o">-</span><span class="nx">info</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span><span class="w"> </span><span class="mf">20</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nx">search</span><span class="o">-</span><span class="nx">section</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">max</span><span class="o">-</span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="mf">600</span><span class="nx">px</span><span class="p">;</span>
<span class="w">  </span><span class="nx">margin</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="nx">auto</span><span class="w"> </span><span class="mf">20</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nx">data</span><span class="o">-</span><span class="nx">grid</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">min</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="mf">400</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/style&gt;</span>
</code></pre></div>

<h2 id="5">5. 환경별 배포 전략</h2>
<h3 id="51">5.1 개발 환경에서 실행</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Flask 서버 실행 (터미널 1)</span>
<span class="nb">cd</span><span class="w"> </span>backend
python<span class="w"> </span>app.py

<span class="c1"># Vue 개발 서버 실행 (터미널 2)</span>
<span class="nb">cd</span><span class="w"> </span>frontend
npm<span class="w"> </span>run<span class="w"> </span>dev
</code></pre></div>

<h3 id="52">5.2 운영 환경 배포</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Flask 운영 환경 설정</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">FLASK_ENV</span><span class="o">=</span>production
<span class="nb">export</span><span class="w"> </span><span class="nv">PROD_CORS_ORIGINS</span><span class="o">=</span>https://afm.skhynix.com
<span class="nb">export</span><span class="w"> </span><span class="nv">SECRET_KEY</span><span class="o">=</span><span class="s1">&#39;강력한-비밀-키-생성&#39;</span>

<span class="c1"># Gunicorn으로 실행 (WSGI 서버)</span>
gunicorn<span class="w"> </span>--bind<span class="w"> </span><span class="m">0</span>.0.0.0:5000<span class="w"> </span>app:app

<span class="c1"># Vue 빌드</span>
npm<span class="w"> </span>run<span class="w"> </span>build
<span class="c1"># dist 폴더를 웹 서버(nginx 등)에 배포</span>
</code></pre></div>

<h2 id="6">6. 보안 고려사항</h2>
<h3 id="61-cors">6.1 CORS 설정의 중요성</h3>
<p>CORS는 웹 브라우저의 보안 기능으로, 다른 도메인에서의 요청을 제한합니다:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 잘못된 예 - 모든 도메인 허용 (보안 위험!)</span>
<span class="n">CORS</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">origins</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>

<span class="c1"># 올바른 예 - 특정 도메인만 허용</span>
<span class="n">CORS</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">origins</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;https://afm.skhynix.com&quot;</span><span class="p">])</span>
</code></pre></div>

<h3 id="62">6.2 환경 변수 관리</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># .gitignore에 추가</span>
.env
.env.local
.env.*.local

<span class="c1"># 환경 변수 템플릿 제공 (.env.example)</span>
<span class="nv">FLASK_ENV</span><span class="o">=</span>development
<span class="nv">DEV_CORS_ORIGINS</span><span class="o">=</span>http://localhost:3000
<span class="nv">PROD_CORS_ORIGINS</span><span class="o">=</span>https://your-domain.com
<span class="nv">SECRET_KEY</span><span class="o">=</span>generate-your-own-secret-key
</code></pre></div>

<h2 id="7">7. 트러블슈팅</h2>
<h3 id="71">7.1 일반적인 문제와 해결방법</h3>
<p><strong>CORS 오류</strong></p>
<div class="highlight"><pre><span></span><code>Access to XMLHttpRequest at &#39;http://localhost:5000/api/health&#39; from origin &#39;http://localhost:3000&#39; has been blocked by CORS policy
</code></pre></div>

<p>해결: Flask 서버의 CORS 설정 확인</p>
<p><strong>네트워크 오류</strong></p>
<div class="highlight"><pre><span></span><code>Network Error: Failed to fetch
</code></pre></div>

<p>해결:</p>
<ol>
<li>Flask 서버가 실행 중인지 확인</li>
<li>포트 번호 확인 (5000)</li>
<li>방화벽 설정 확인</li>
</ol>
<p><strong>환경 변수 미설정</strong></p>
<div class="highlight"><pre><span></span><code>undefined API_BASE_URL
</code></pre></div>

<p>해결:</p>
<ol>
<li><code>.env</code> 파일 생성 확인</li>
<li>변수명 규칙 확인 (Vue는 <code>VITE_</code> 접두사 필요)</li>
<li>개발 서버 재시작</li>
</ol>
<h2 id="_2">마무리</h2>
<p>이 장에서는 Flask와 Vue.js를 API로 연결하는 방법과 환경별 설정 관리의 중요성을 배웠습니다.</p>
<h3 id="_3">핵심 포인트</h3>
<ol>
<li><strong>환경 분리</strong>: 개발/운영 환경을 명확히 구분</li>
<li><strong>보안 설정</strong>: CORS를 통한 접근 제어</li>
<li><strong>환경 변수</strong>: <code>.env</code> 파일로 유연한 설정 관리</li>
<li><strong>에러 처리</strong>: 사용자 친화적인 오류 메시지</li>
<li><strong>WSGI 이해</strong>: 운영 환경에서의 Flask 실행 방법</li>
</ol>
<p>이러한 기초를 바탕으로 안전하고 확장 가능한 웹 애플리케이션을 구축할 수 있습니다.</p>
</body>
</html>