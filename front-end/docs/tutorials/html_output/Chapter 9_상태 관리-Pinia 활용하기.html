<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 9_상태 관리-Pinia 활용하기</title>
    
    <style>
    body {
        font-family: 'Malgun Gothic', '맑은 고딕', 'Noto Sans CJK KR', 'Dotum', '돋움', 'Gulim', '굴림', Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 20px;
        background-color: #fff;
    }
    
    h1, h2, h3, h4, h5, h6 {
        color: #2c3e50;
        margin-top: 2em;
        margin-bottom: 1em;
        text-align: left;
    }
    
    h1 {
        border-bottom: 3px solid #3498db;
        padding-bottom: 10px;
        text-align: center;
        margin-bottom: 2em;
    }
    
    h2 {
        border-bottom: 2px solid #ecf0f1;
        padding-bottom: 8px;
    }
    
    p {
        margin-bottom: 1em;
        text-align: justify;
    }
    
    code {
        background-color: #f1f3f4;
        border: 1px solid #e1e4e8;
        border-radius: 3px;
        padding: 2px 6px;
        font-family: 'Consolas', 'Monaco', 'Courier New', 'D2Coding', 'Nanum Gothic Coding', monospace;
        font-size: 0.9em;
        color: #24292e;
    }
    
    pre {
        background-color: #f6f8fa;
        border: 1px solid #e1e4e8;
        border-radius: 6px;
        padding: 16px;
        overflow-x: auto;
        margin: 1em 0;
        line-height: 1.45;
        font-family: 'Consolas', 'Monaco', 'Courier New', 'D2Coding', 'Nanum Gothic Coding', monospace;
    }
    
    pre code {
        background: none;
        border: none;
        padding: 0;
        color: inherit;
        font-size: 0.9em;
    }
    
    /* Enhanced syntax highlighting support */
    .highlight {
        background-color: #f6f8fa;
        border-radius: 6px;
        margin: 1em 0;
    }
    
    .highlight pre {
        background: none;
        border: none;
        margin: 0;
    }
    
    /* Fix Vue.js template syntax highlighting issues */
    .highlight .err {
        background: none !important;
        border: none !important;
        color: #24292e !important;
    }
    
    /* Override error highlighting for Vue directives */
    .highlight .nt {
        color: #22863a;
    }
    
    .highlight .na {
        color: #6f42c1;
    }
    
    table {
        border-collapse: collapse;
        width: 100%;
        margin: 1.5em auto;
    }
    
    table th, table td {
        border: 1px solid #ddd;
        padding: 12px 8px;
        text-align: left;
    }
    
    table th {
        background-color: #f2f2f2;
        font-weight: bold;
        text-align: center;
    }
    
    blockquote {
        border-left: 4px solid #3498db;
        margin: 1em 0;
        padding-left: 20px;
        color: #7f8c8d;
        font-style: italic;
    }
    
    ul, ol {
        margin: 1em 0;
        padding-left: 2em;
    }
    
    li {
        margin-bottom: 0.5em;
    }
    
    hr {
        border: none;
        height: 2px;
        background-color: #ecf0f1;
        margin: 3em 0;
    }
    
    img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 1em auto;
        border-radius: 5px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .highlight {
        background-color: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 5px;
        padding: 10px;
        margin: 1em 0;
    }
    
    @media print {
        body {
            max-width: none;
            margin: 0;
            padding: 20px;
        }
    }
    </style>
    
</head>
<body>
    <h1 id="-pinia">상태 관리 - Pinia 활용하기</h1>
<h2 id="_1">상태 관리 패키지가 탄생한 이유</h2>
<h3 id="_2">웹 애플리케이션의 진화</h3>
<p>초기 웹사이트는 단순한 정적 페이지였습니다. 사용자가 링크를 클릭하면 새로운 페이지로 이동하고, 각 페이지는 독립적이었습니다. 하지만 웹 기술이 발전하면서 <strong>단일 페이지 애플리케이션(SPA, Single Page Application)</strong>이 등장했습니다.</p>
<p>SPA에서는 페이지 전체를 새로 로드하지 않고, 필요한 부분만 동적으로 업데이트합니다. 이는 사용자 경험을 크게 향상시켰지만, 동시에 새로운 문제들을 만들어냈습니다.</p>
<h3 id="_3">컴포넌트 기반 아키텍처의 등장과 문제점</h3>
<p>React, Vue, Angular과 같은 현대적 프론트엔드 프레임워크는 <strong>컴포넌트 기반 아키텍처</strong>를 도입했습니다. 이는 UI를 독립적이고 재사용 가능한 컴포넌트로 나누어 개발하는 방식입니다.</p>
<p>하지만 애플리케이션이 복잡해지면서 다음과 같은 문제들이 나타났습니다:</p>
<h4 id="1">1. 상태 공유의 어려움</h4>
<div class="highlight"><pre><span></span><code>현실적인 예시: 쇼핑몰 애플리케이션

헤더 컴포넌트 (장바구니 개수 표시)
   ↓
메인 페이지
   ├── 상품 목록 컴포넌트
   │   └── 상품 카드 컴포넌트 (장바구니 추가 버튼)
   └── 사이드바 컴포넌트
       └── 장바구니 요약 컴포넌트
</code></pre></div>

<p>사용자가 상품을 장바구니에 추가하면, 헤더의 장바구니 개수, 사이드바의 장바구니 요약이 모두 업데이트되어야 합니다. 하지만 이 컴포넌트들은 서로 직접적인 부모-자식 관계가 아닙니다.</p>
<h4 id="2-props-drilling">2. Props Drilling의 악몽</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// 7단계를 거쳐 사용자 정보를 전달해야 하는 상황</span>
<span class="nx">App</span><span class="p">.</span><span class="nx">vue</span><span class="w"> </span><span class="p">(</span><span class="nx">사용자</span><span class="w"> </span><span class="nx">정보</span><span class="w"> </span><span class="nx">보유</span><span class="p">)</span>
<span class="err">└──</span><span class="w"> </span><span class="nx">Layout</span><span class="p">.</span><span class="nx">vue</span><span class="w"> </span><span class="p">(</span><span class="nx">단순</span><span class="w"> </span><span class="nx">전달</span><span class="p">)</span>
<span class="w">    </span><span class="err">└──</span><span class="w"> </span><span class="nx">Dashboard</span><span class="p">.</span><span class="nx">vue</span><span class="w"> </span><span class="p">(</span><span class="nx">단순</span><span class="w"> </span><span class="nx">전달</span><span class="p">)</span>
<span class="w">        </span><span class="err">└──</span><span class="w"> </span><span class="nx">ContentArea</span><span class="p">.</span><span class="nx">vue</span><span class="w"> </span><span class="p">(</span><span class="nx">단순</span><span class="w"> </span><span class="nx">전달</span><span class="p">)</span>
<span class="w">            </span><span class="err">└──</span><span class="w"> </span><span class="nx">DataSection</span><span class="p">.</span><span class="nx">vue</span><span class="w"> </span><span class="p">(</span><span class="nx">단순</span><span class="w"> </span><span class="nx">전달</span><span class="p">)</span>
<span class="w">                </span><span class="err">└──</span><span class="w"> </span><span class="nx">ChartContainer</span><span class="p">.</span><span class="nx">vue</span><span class="w"> </span><span class="p">(</span><span class="nx">단순</span><span class="w"> </span><span class="nx">전달</span><span class="p">)</span>
<span class="w">                    </span><span class="err">└──</span><span class="w"> </span><span class="nx">ChartLegend</span><span class="p">.</span><span class="nx">vue</span><span class="w"> </span><span class="p">(</span><span class="nx">실제</span><span class="w"> </span><span class="nx">사용</span><span class="p">)</span>
</code></pre></div>

<p>중간의 5개 컴포넌트는 사용자 정보를 전혀 사용하지 않으면서도 props로 받아서 전달만 해야 합니다.</p>
<h4 id="3">3. 예측 불가능한 상태 변화</h4>
<p>여러 컴포넌트에서 동일한 데이터를 변경할 수 있게 되면서, 언제 어디서 상태가 변경되는지 추적하기 어려워졌습니다.</p>
<h3 id="flux">Flux 아키텍처의 등장</h3>
<p>이러한 문제를 해결하기 위해 Facebook에서 <strong>Flux 아키텍처</strong>를 제안했습니다. Flux는 <strong>단방향 데이터 흐름</strong>을 강제하여 상태 관리를 예측 가능하게 만들었습니다.</p>
<div class="highlight"><pre><span></span><code>Flux 패턴:
Action → Dispatcher → Store → View → Action
</code></pre></div>

<h3 id="redux-vuex">Redux와 Vuex의 탄생</h3>
<p>Flux 아키텍처를 구현한 대표적인 라이브러리들이 등장했습니다:</p>
<ul>
<li><strong>Redux</strong> (React 생태계): Flux + 함수형 프로그래밍 개념</li>
<li><strong>Vuex</strong> (Vue 생태계): Vue에 최적화된 상태 관리</li>
</ul>
<h3 id="pinia">Pinia가 필요한 이유</h3>
<p>Vuex는 훌륭한 상태 관리 도구였지만, Vue 3와 Composition API의 등장으로 몇 가지 한계가 드러났습니다:</p>
<h4 id="vuex">Vuex의 한계점</h4>
<ol>
<li><strong>복잡한 타입 추론</strong>: TypeScript와 함께 사용할 때 타입 정의가 복잡</li>
<li><strong>보일러플레이트 코드</strong>: mutations, actions 등 많은 코드 작성 필요</li>
<li><strong>모듈 시스템의 복잡성</strong>: 네임스페이스 모듈 관리가 어려움</li>
</ol>
<h4 id="pinia_1">Pinia의 혁신</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Vuex (복잡함)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Vuex</span><span class="p">.</span><span class="nx">Store</span><span class="p">({</span>
<span class="w">  </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nx">mutations</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">INCREMENT</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">actions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">increment</span><span class="p">({</span><span class="w"> </span><span class="nx">commit</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">commit</span><span class="p">(</span><span class="s2">&quot;INCREMENT&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">});</span>

<span class="c1">// Pinia (간단함)</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useCounterStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s2">&quot;counter&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">increment</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">increment</span><span class="w"> </span><span class="p">};</span>
<span class="p">});</span>
</code></pre></div>

<h2 id="_4">상태 관리의 필요성</h2>
<p>Vue 애플리케이션이 성장하면서 컴포넌트 간 데이터 공유가 복잡해집니다. 부모-자식 관계가 아닌 컴포넌트들이 같은 데이터를 사용해야 하거나, 여러 컴포넌트에서 동일한 상태를 변경해야 할 때 상태 관리가 필요합니다.</p>
<h3 id="_5">상태 관리가 필요한 시나리오</h3>
<ul>
<li>사용자 로그인 정보를 여러 컴포넌트에서 사용</li>
<li>AFM 장비 목록을 대시보드, 분석 페이지, 설정 페이지에서 공유</li>
<li>실시간 알림을 여러 화면에서 동시에 표시</li>
<li>필터링된 데이터를 페이지 이동 후에도 유지</li>
</ul>
<h2 id="pinia_2">Pinia 설치 및 설정</h2>
<p>Pinia는 Vue 3를 위한 공식 상태 관리 라이브러리입니다. Vuex의 후속 버전으로, 더 간단하고 TypeScript 친화적인 API를 제공합니다. Vue Router처럼 Vue 설치 진행 시 Pinia를 함께 설치할 건지 물어보는 경우가 많습니다.</p>
<h3 id="typescript">TypeScript란?</h3>
<p>TypeScript는 JavaScript에 <strong>정적 타입</strong>을 추가한 <strong>프로그래밍 언어</strong>입니다. JavaScript의 상위 집합(Superset)으로, JavaScript 코드에 타입을 명시할 수 있게 해 주어 <strong>코드 오류를 사전에 방지</strong>하고 <strong>더 안전하고 유지보수하기 쉬운 코드</strong>를 작성할 수 있게 합니다.</p>
<p>TypeScript 코드는 브라우저에서 실행될 수 있도록 <strong>JavaScript로 컴파일</strong>됩니다. 코드가 방대해지고 협업이 진행될 때 TypeScript를 주로 사용하게 됩니다. JavaScript가 익숙해지면 TypeScript를 공부해봅시다.</p>
<h3 id="_6">설치</h3>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>install<span class="w"> </span>pinia
</code></pre></div>

<h3 id="mainjs">main.js 설정</h3>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createApp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;vue&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createPinia</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;pinia&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./App.vue&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">pinia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createPinia</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">pinia</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s2">&quot;#app&quot;</span><span class="p">);</span>
</code></pre></div>

<h2 id="store">Store 만들기</h2>
<p>Pinia에서는 <code>defineStore</code> 함수를 사용하여 스토어를 정의합니다. Composition API 스타일로 작성하면 더 직관적입니다.</p>
<h3 id="srcstoresequipmentjs">src/stores/equipment.js</h3>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">defineStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;pinia&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">computed</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;vue&quot;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s2">&quot;equipment&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// State</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">equipments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">loading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">selectedEquipmentId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Getters</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">activeEquipments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">selectedEquipment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">find</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">selectedEquipmentId</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">equipmentCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Actions</span>
<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchEquipments</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">loading</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s2">&quot;/api/equipments&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;장비 목록 로드 실패:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">loading</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">addEquipment</span><span class="p">(</span><span class="nx">equipment</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
<span class="w">      </span><span class="p">...</span><span class="nx">equipment</span><span class="p">,</span>
<span class="w">      </span><span class="nx">createdAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">updateEquipment</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">updates</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">id</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">index</span><span class="p">],</span><span class="w"> </span><span class="p">...</span><span class="nx">updates</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">deleteEquipment</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">id</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">selectEquipment</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">selectedEquipmentId</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">id</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// State</span>
<span class="w">    </span><span class="nx">equipments</span><span class="p">,</span>
<span class="w">    </span><span class="nx">loading</span><span class="p">,</span>
<span class="w">    </span><span class="nx">selectedEquipmentId</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Getters</span>
<span class="w">    </span><span class="nx">activeEquipments</span><span class="p">,</span>
<span class="w">    </span><span class="nx">selectedEquipment</span><span class="p">,</span>
<span class="w">    </span><span class="nx">equipmentCount</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Actions</span>
<span class="w">    </span><span class="nx">fetchEquipments</span><span class="p">,</span>
<span class="w">    </span><span class="nx">addEquipment</span><span class="p">,</span>
<span class="w">    </span><span class="nx">updateEquipment</span><span class="p">,</span>
<span class="w">    </span><span class="nx">deleteEquipment</span><span class="p">,</span>
<span class="w">    </span><span class="nx">selectEquipment</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">});</span>
</code></pre></div>

<h2 id="state-getters-actions">State, Getters, Actions 설명</h2>
<h3 id="state">State (상태)</h3>
<p>애플리케이션의 중앙 데이터 저장소입니다. Composition API에서는 <code>ref()</code>나 <code>reactive()</code>를 사용하여 반응형 상태를 정의합니다.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">equipments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">([]);</span><span class="w"> </span><span class="c1">// 장비 목록</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">loading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// 로딩 상태</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reactive</span><span class="p">({</span>
<span class="w">  </span><span class="c1">// 필터 옵션</span>
<span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="getters">Getters (계산된 속성)</h3>
<p>State를 기반으로 파생된 값을 반환합니다. <code>computed()</code>를 사용하여 정의하며, 종속된 상태가 변경될 때만 재계산됩니다.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">activeCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
<span class="p">});</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">filteredEquipments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s2">&quot;all&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="actions">Actions (액션)</h3>
<p>상태를 변경하는 함수들입니다. 비동기 작업도 처리할 수 있으며, 일반 함수로 정의합니다.</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchMeasurementData</span><span class="p">(</span><span class="nx">equipmentId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`/api/equipments/</span><span class="si">${</span><span class="nx">equipmentId</span><span class="si">}</span><span class="sb">/measurements`</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// 상태 업데이트</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">equipment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">find</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">equipmentId</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">equipment</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">equipment</span><span class="p">.</span><span class="nx">measurements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;측정 데이터 로드 실패:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="composition-api">Composition API의 변화</h2>
<h3 id="options-api-vs-composition-api">Options API vs Composition API</h3>
<p><strong>기존 Options API 방식</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s2">&quot;equipment&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">equipments</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nx">loading</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">  </span><span class="p">}),</span>

<span class="w">  </span><span class="nx">getters</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">activeEquipments</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">equipments</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="nx">actions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">fetchEquipments</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">loading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">      </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">});</span>
</code></pre></div>

<p><strong>Composition API 방식</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s2">&quot;equipment&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 모든 로직을 하나의 setup 함수 안에 작성</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">equipments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">loading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">activeEquipments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">equipments</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">eq</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">eq</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchEquipments</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">loading</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">equipments</span><span class="p">,</span><span class="w"> </span><span class="nx">loading</span><span class="p">,</span><span class="w"> </span><span class="nx">activeEquipments</span><span class="p">,</span><span class="w"> </span><span class="nx">fetchEquipments</span><span class="w"> </span><span class="p">};</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="composition-api_1">Composition API의 장점</h3>
<ol>
<li><strong>타입 추론 향상</strong>: TypeScript와 함께 사용할 때 더 정확한 타입 추론</li>
<li><strong>코드 재사용</strong>: Composable 함수로 로직을 쉽게 추출하고 재사용</li>
<li><strong>더 나은 구조화</strong>: 관련된 로직을 함께 그룹화</li>
<li><strong>IDE 지원</strong>: 자동 완성과 리팩토링이 더 효과적</li>
</ol>
<p><strong>Composable 함수</strong>란 <strong>다른 함수들과 조합</strong>하여 더 복잡한 동작을 만들어낼 수 있는 함수입니다. 보통 입력과 출력을 명확히 하고, 부작용이 없는 순수 함수인 경우가 많습니다.</p>
<h2 id="store_1">컴포넌트에서 Store 사용하기</h2>
<h3 id="_7">대시보드 컴포넌트</h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Template</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">container</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">row</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">col</span><span class="w"> </span><span class="nx">cols</span><span class="o">=</span><span class="s2">&quot;12&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">장비</span><span class="w"> </span><span class="nx">현황</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">총</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">equipmentCount</span><span class="w"> </span><span class="p">}}</span><span class="nx">대</span><span class="w"> </span><span class="nx">중</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">activeEquipments</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="p">}}</span><span class="nx">대</span><span class="w"> </span><span class="nx">운영</span><span class="w"> </span><span class="nx">중</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/v-col&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/v-row&gt;</span>

<span class="w">    </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">row</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">col</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">&quot;equipment in activeEquipments&quot;</span><span class="w"> </span><span class="o">:</span><span class="nx">key</span><span class="o">=</span><span class="s2">&quot;equipment.id&quot;</span><span class="w"> </span><span class="nx">cols</span><span class="o">=</span><span class="s2">&quot;12&quot;</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="s2">&quot;4&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="w"> </span><span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&quot;selectEquipment(equipment.id)&quot;</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">-</span><span class="nx">title</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">equipment</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/v-card-title&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">-</span><span class="nx">text</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">상태</span><span class="o">:</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">equipment</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">마지막</span><span class="w"> </span><span class="nx">측정</span><span class="o">:</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">equipment</span><span class="p">.</span><span class="nx">lastMeasurement</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/v-card-text&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/v-card&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/v-col&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/v-row&gt;</span>

<span class="w">    </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">progress</span><span class="o">-</span><span class="nx">linear</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&quot;loading&quot;</span><span class="w"> </span><span class="nx">indeterminate</span><span class="o">&gt;&lt;</span><span class="err">/v-progress-linear&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/v-container&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="c1">// Script</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onMounted</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/equipment&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">storeToRefs</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;pinia&#39;</span>

<span class="c1">// Store 사용</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">equipmentStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="p">()</span>

<span class="c1">// 반응형 상태 추출 (storeToRefs 사용)</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">activeEquipments</span><span class="p">,</span><span class="w"> </span><span class="nx">loading</span><span class="p">,</span><span class="w"> </span><span class="nx">equipmentCount</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">storeToRefs</span><span class="p">(</span><span class="nx">equipmentStore</span><span class="p">)</span>

<span class="c1">// Actions는 직접 구조 분해</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fetchEquipments</span><span class="p">,</span><span class="w"> </span><span class="nx">selectEquipment</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">equipmentStore</span>

<span class="c1">// 컴포넌트 마운트 시 데이터 로드</span>
<span class="nx">onMounted</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">fetchEquipments</span><span class="p">()</span>
<span class="p">})</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h3 id="_8">장비 추가 폼 컴포넌트</h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Template</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">dialog</span><span class="w"> </span><span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&quot;dialog&quot;</span><span class="w"> </span><span class="nx">max</span><span class="o">-</span><span class="nx">width</span><span class="o">=</span><span class="s2">&quot;600&quot;</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">-</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">새</span><span class="w"> </span><span class="nx">장비</span><span class="w"> </span><span class="nx">추가</span><span class="o">&lt;</span><span class="err">/v-card-title&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">-</span><span class="nx">text</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">form</span><span class="w"> </span><span class="err">@</span><span class="nx">submit</span><span class="p">.</span><span class="nx">prevent</span><span class="o">=</span><span class="s2">&quot;handleSubmit&quot;</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">text</span><span class="o">-</span><span class="nx">field</span>
<span class="w">            </span><span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&quot;formData.name&quot;</span>
<span class="w">            </span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;장비명&quot;</span>
<span class="w">            </span><span class="nx">required</span>
<span class="w">          </span><span class="o">&gt;&lt;</span><span class="err">/v-text-field&gt;</span>

<span class="w">          </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">select</span>
<span class="w">            </span><span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&quot;formData.type&quot;</span>
<span class="w">            </span><span class="o">:</span><span class="nx">items</span><span class="o">=</span><span class="s2">&quot;equipmentTypes&quot;</span>
<span class="w">            </span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;장비 타입&quot;</span>
<span class="w">          </span><span class="o">&gt;&lt;</span><span class="err">/v-select&gt;</span>

<span class="w">          </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">select</span>
<span class="w">            </span><span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&quot;formData.status&quot;</span>
<span class="w">            </span><span class="o">:</span><span class="nx">items</span><span class="o">=</span><span class="s2">&quot;[&#39;active&#39;, &#39;maintenance&#39;, &#39;inactive&#39;]&quot;</span>
<span class="w">            </span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;상태&quot;</span>
<span class="w">          </span><span class="o">&gt;&lt;</span><span class="err">/v-select&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/v-form&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/v-card-text&gt;</span>

<span class="w">      </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">card</span><span class="o">-</span><span class="nx">actions</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">spacer</span><span class="o">&gt;&lt;</span><span class="err">/v-spacer&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">btn</span><span class="w"> </span><span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&quot;dialog = false&quot;</span><span class="o">&gt;</span><span class="nx">취소</span><span class="o">&lt;</span><span class="err">/v-btn&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">v</span><span class="o">-</span><span class="nx">btn</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="w"> </span><span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&quot;handleSubmit&quot;</span><span class="o">&gt;</span><span class="nx">추가</span><span class="o">&lt;</span><span class="err">/v-btn&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/v-card-actions&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/v-card&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/v-dialog&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="c1">// Script</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">reactive</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/equipment&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">equipmentStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="p">()</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">dialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reactive</span><span class="p">({</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;active&#39;</span>
<span class="p">})</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">equipmentTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;AFM&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SEM&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;TEM&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;XRD&#39;</span><span class="p">]</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">handleSubmit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Store의 action 호출</span>
<span class="w">  </span><span class="nx">equipmentStore</span><span class="p">.</span><span class="nx">addEquipment</span><span class="p">(</span><span class="nx">formData</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// 폼 초기화</span>
<span class="w">  </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">formData</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;active&#39;</span>
<span class="w">  </span><span class="p">})</span>

<span class="w">  </span><span class="nx">dialog</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h3 id="store_2">여러 Store 함께 사용하기</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/equipment&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useUserStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/user&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useMeasurementStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/measurement&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">storeToRefs</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;pinia&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">equipmentStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useEquipmentStore</span><span class="p">()</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">userStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useUserStore</span><span class="p">()</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">measurementStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMeasurementStore</span><span class="p">()</span>

<span class="c1">// 각 Store의 상태와 액션 사용</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">currentUser</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">storeToRefs</span><span class="p">(</span><span class="nx">userStore</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">selectedEquipment</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">storeToRefs</span><span class="p">(</span><span class="nx">equipmentStore</span><span class="p">)</span>

<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadMeasurements</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">selectedEquipment</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">measurementStore</span><span class="p">.</span><span class="nx">fetchMeasurements</span><span class="p">({</span>
<span class="w">      </span><span class="nx">equipmentId</span><span class="o">:</span><span class="w"> </span><span class="nx">selectedEquipment</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">      </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">id</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h2 id="vue">Vue 컴포넌트 통신 방법</h2>
<h3 id="_9">기본 컴포넌트 통신</h3>
<p>Vue에서 컴포넌트 간 데이터 전달은 계층 구조에 따라 다릅니다.</p>
<h4 id="props-">Props - 부모에서 자식으로</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// 부모 컴포넌트</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">EquipmentCard</span>
<span class="w">    </span><span class="o">:</span><span class="nx">equipment</span><span class="o">=</span><span class="s2">&quot;equipmentData&quot;</span>
<span class="w">    </span><span class="o">:</span><span class="nx">status</span><span class="o">=</span><span class="s2">&quot;activeStatus&quot;</span>
<span class="w">    </span><span class="err">@</span><span class="nx">update</span><span class="o">=</span><span class="s2">&quot;handleUpdate&quot;</span>
<span class="w">  </span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="c1">// 자식 컴포넌트 (EquipmentCard.vue)</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">equipment</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/h3&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">상태</span><span class="o">:</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">status</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="nx">defineProps</span><span class="p">({</span>
<span class="w">  </span><span class="nx">equipment</span><span class="o">:</span><span class="w"> </span><span class="nb">Object</span><span class="p">,</span>
<span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span>
<span class="p">})</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h4 id="emit-">Emit - 자식에서 부모로</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// 자식 컴포넌트</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">emit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineEmits</span><span class="p">([</span><span class="s1">&#39;update&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;delete&#39;</span><span class="p">])</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">updateEquipment</span><span class="p">(){</span><span class="s2">&quot; &quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">{</span><span class="nx">emit</span><span class="p">(</span><span class="s2">&quot;update&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;새 이름&quot;</span><span class="w"> </span><span class="p">})}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h3 id="props-drilling">Props Drilling 문제</h3>
<p>여러 단계를 거쳐 데이터를 전달해야 할 때 발생하는 문제입니다.</p>
<div class="highlight"><pre><span></span><code>App.vue → Dashboard.vue → EquipmentList.vue → EquipmentCard.vue
4단계를 거쳐 userData를 전달해야 함
</code></pre></div>

<h3 id="provideinject-">Provide/Inject - 깊은 계층 구조 해결</h3>
<p>Provide/Inject는 Vue에서 제공하는 의존성 주입 시스템입니다. Props Drilling 문제를 해결하기 위한 중간 단계 해결책으로, 조상 컴포넌트에서 후손 컴포넌트로 직접 데이터를 전달할 수 있게 해줍니다.</p>
<h4 id="_10">기본 사용법</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// 최상위 컴포넌트 (조상)</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">UserProfile</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">provide</span><span class="p">,</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">UserProfile</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./UserProfile.vue&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">userData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">({</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;홍길동&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;engineer&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">department</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;AI/DT TF&#39;</span>
<span class="p">})</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;dark&#39;</span><span class="p">)</span>

<span class="c1">// 여러 데이터를 provide할 수 있음</span>
<span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">userData</span><span class="p">)</span>
<span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">theme</span><span class="p">)</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>

<span class="c1">// 깊은 하위 컴포넌트 (후손)</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="o">:</span><span class="kd">class</span><span class="o">=</span><span class="s2">&quot;theme&quot;</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/h3&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">부서</span><span class="o">:</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">department</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">역할</span><span class="o">:</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">role</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="c1">// inject로 조상 컴포넌트의 데이터 접근</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">)</span>

<span class="c1">// 기본값 설정 가능</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;settings&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">notifications</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">})</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h4 id="-">실제 활용 예시 - 다국어 지원</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// App.vue (최상위)</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">provide</span><span class="p">,</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">locale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;ko&#39;</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">translations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">({</span>
<span class="w">  </span><span class="nx">ko</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">welcome</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;환영합니다&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">equipment</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;장비&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;상태&#39;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">en</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">welcome</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Welcome&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">equipment</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Equipment&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Status&#39;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">})</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">t</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">translations</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">locale</span><span class="p">.</span><span class="nx">value</span><span class="p">][</span><span class="nx">key</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">key</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">changeLocale</span><span class="p">(</span><span class="nx">newLocale</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">locale</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newLocale</span>
<span class="p">}</span>

<span class="c1">// 번역 함수와 로케일 변경 함수 제공</span>
<span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;i18n&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">changeLocale</span><span class="p">,</span><span class="w"> </span><span class="nx">locale</span><span class="w"> </span><span class="p">})</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>

<span class="c1">// 깊은 하위 컴포넌트에서 사용</span>
<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">}}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{{</span><span class="w"> </span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;equipment&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">}}</span><span class="o">:</span><span class="w"> </span><span class="nx">AFM</span><span class="o">-</span><span class="mo">001</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">select</span><span class="w"> </span><span class="err">@</span><span class="nx">change</span><span class="o">=</span><span class="s2">&quot;changeLocale($event.target.value)&quot;</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">option</span><span class="w"> </span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;ko&quot;</span><span class="o">&gt;</span><span class="nx">한국어</span><span class="o">&lt;</span><span class="err">/option&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">option</span><span class="w"> </span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="o">&gt;</span><span class="nx">English</span><span class="o">&lt;</span><span class="err">/option&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/select&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">changeLocale</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;i18n&#39;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h4 id="provideinject">반응형 Provide/Inject</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// 부모 컴포넌트</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">provide</span><span class="p">,</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">readonly</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span>

<span class="c1">// 읽기 전용으로 제공하여 자식에서 직접 수정 방지</span>
<span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">readonly</span><span class="p">(</span><span class="nx">count</span><span class="p">))</span>
<span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">readonly</span><span class="p">(</span><span class="nx">message</span><span class="p">))</span>

<span class="c1">// 수정 함수들을 따로 제공</span>
<span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;updateCount&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">newCount</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newCount</span>
<span class="p">})</span>

<span class="nx">provide</span><span class="p">(</span><span class="s1">&#39;updateMessage&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">newMessage</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">message</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newMessage</span>
<span class="p">})</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>

<span class="c1">// 자식 컴포넌트</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">updateCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;updateCount&#39;</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">updateMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="s1">&#39;updateMessage&#39;</span><span class="p">)</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">increment</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">updateCount</span><span class="p">(</span><span class="nx">count</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h4 id="provideinject_1">Provide/Inject의 장단점</h4>
<p><strong>장점:</strong></p>
<ul>
<li>Props Drilling 문제 해결</li>
<li>중간 컴포넌트에 불필요한 props 전달 불필요</li>
<li>플러그인이나 라이브러리에서 설정 주입에 유용</li>
<li>컴포넌트 트리의 특정 부분에만 필요한 데이터 공유에 적합</li>
</ul>
<p><strong>단점:</strong></p>
<ul>
<li>어떤 조상 컴포넌트에서 데이터가 오는지 추적하기 어려움</li>
<li>전역적이지 않아 형제 컴포넌트 간 통신에는 부적합</li>
<li>의존성이 명시적이지 않아 코드 이해가 어려울 수 있음</li>
<li>너무 많이 사용하면 컴포넌트 간 결합도가 높아짐</li>
</ul>
<h4 id="provideinject_2">언제 Provide/Inject를 사용해야 하나</h4>
<p><strong>적합한 경우:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 테마 제공자</span>
<span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;theme&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">themeConfig</span><span class="p">);</span>

<span class="c1">// 폼 컨텍스트 제공</span>
<span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">formMethods</span><span class="p">);</span>

<span class="c1">// 모달/다이얼로그 컨텍스트</span>
<span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;modal&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">modalControls</span><span class="p">);</span>

<span class="c1">// 권한 시스템</span>
<span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">userPermissions</span><span class="p">);</span>
</code></pre></div>

<p><strong>부적합한 경우:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// ❌ 비즈니스 로직 상태 (Pinia 사용 권장)</span>
<span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;equipmentList&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">equipments</span><span class="p">);</span>

<span class="c1">// ❌ 자주 변경되는 전역 상태</span>
<span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;notifications&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">notifications</span><span class="p">);</span>

<span class="c1">// ❌ 단순한 부모-자식 통신 (Props 사용 권장)</span>
<span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;buttonColor&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;primary&quot;</span><span class="p">);</span>
</code></pre></div>

<h3 id="pinia_3">Pinia가 해결하는 문제</h3>
<h4 id="_11">형제 컴포넌트 간 통신</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Header.vue</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useUserStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/user&#39;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">userStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useUserStore</span><span class="p">()</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>

<span class="c1">// Sidebar.vue</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useUserStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/user&#39;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">userStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useUserStore</span><span class="p">()</span>
<span class="c1">// 동일한 상태 공유</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h4 id="_12">전역 상태 관리</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// stores/notification.js</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useNotificationStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s2">&quot;notification&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">notifications</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">([]);</span>

<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">addNotification</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">notifications</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">message</span><span class="p">,</span>
<span class="w">      </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">notifications</span><span class="p">,</span><span class="w"> </span><span class="nx">addNotification</span><span class="w"> </span><span class="p">};</span>
<span class="p">});</span>
</code></pre></div>

<p>모든 컴포넌트에서 알림 상태에 접근 가능합니다.</p>
<h2 id="_13">언제 무엇을 사용해야 하나</h2>
<h3 id="propsemit">Props/Emit 사용 시나리오</h3>
<ul>
<li>부모-자식 관계가 명확한 경우</li>
<li>컴포넌트가 재사용 가능해야 하는 경우</li>
<li>데이터 흐름이 단순한 경우</li>
<li>UI 컴포넌트 (버튼, 카드, 모달)</li>
<li>폼 입력 컴포넌트</li>
<li>임시 상태나 로컬 UI 상태</li>
</ul>
<h3 id="provideinject_3">Provide/Inject 사용 시나리오</h3>
<ul>
<li>깊은 계층 구조에서 특정 데이터 공유</li>
<li>플러그인이나 라이브러리 설정 주입</li>
<li>컴포넌트 트리의 일부분에만 필요한 데이터</li>
</ul>
<h3 id="pinia_4">Pinia 사용 시나리오</h3>
<ul>
<li>여러 컴포넌트에서 공유하는 상태</li>
<li>페이지 이동 후에도 유지되어야 하는 데이터</li>
<li>복잡한 상태 로직이 필요한 경우</li>
<li>형제 컴포넌트 간 통신</li>
<li>사용자 인증 정보</li>
<li>전역 설정</li>
<li>서버에서 가져온 데이터 캐싱</li>
</ul>
<h2 id="pinia-propsemit">Pinia와 Props/Emit 비교</h2>
<h3 id="propsemit_1">Props/Emit의 장점과 한계</h3>
<h4 id="_14">장점</h4>
<p><strong>컴포넌트 재사용성</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 재사용 가능한 컴포넌트</span>
<span class="o">&lt;</span><span class="nx">EquipmentCard</span>
<span class="w">  </span><span class="o">:</span><span class="nx">title</span><span class="o">=</span><span class="s2">&quot;장비1&quot;</span>
<span class="w">  </span><span class="o">:</span><span class="nx">status</span><span class="o">=</span><span class="s2">&quot;active&quot;</span>
<span class="w">  </span><span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&quot;handleClick&quot;</span>
<span class="err">/&gt;</span>

<span class="c1">// 다른 프로젝트에서도 사용 가능</span>
<span class="o">&lt;</span><span class="nx">EquipmentCard</span>
<span class="w">  </span><span class="o">:</span><span class="nx">title</span><span class="o">=</span><span class="s2">&quot;다른장비&quot;</span>
<span class="w">  </span><span class="o">:</span><span class="nx">status</span><span class="o">=</span><span class="s2">&quot;inactive&quot;</span>
<span class="w">  </span><span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&quot;differentHandler&quot;</span>
<span class="err">/&gt;</span>
</code></pre></div>

<p><strong>명확한 인터페이스</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="c1">// Props로 컴포넌트가 필요한 데이터가 명확함</span>
<span class="nx">defineProps</span><span class="p">({</span>
<span class="w">  </span><span class="nx">equipment</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nb">Object</span><span class="p">,</span>
<span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">showDetails</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">,</span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">})</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<p><strong>단방향 데이터 흐름</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 부모 → 자식</span>
<span class="o">&lt;</span><span class="nx">ChildComponent</span><span class="w"> </span><span class="o">:</span><span class="nx">data</span><span class="o">=</span><span class="s2">&quot;parentData&quot;</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="c1">// 자식 → 부모</span>
<span class="o">&lt;</span><span class="nx">ChildComponent</span><span class="w"> </span><span class="err">@</span><span class="nx">update</span><span class="o">=</span><span class="s2">&quot;parentData = $event&quot;</span><span class="w"> </span><span class="o">/&gt;</span>
</code></pre></div>

<h4 id="_15">한계점</h4>
<p><strong>Props Drilling 문제</strong></p>
<p>여러 컴포넌트 계층을 통해 데이터를 전달할 때 발생하는 문제입니다.</p>
<ul>
<li>중간 컴포넌트들은 단순히 데이터를 전달하는 역할만 함</li>
<li>코드가 장황해지고 유지보수가 어려워짐</li>
</ul>
<p><strong>형제 컴포넌트 간 통신 어려움</strong></p>
<p>동일한 부모를 가진 컴포넌트 간에 데이터를 공유하려면 부모를 통해 우회해야 합니다.</p>
<ul>
<li>복잡한 상태 공유 시 부모 컴포넌트가 과도하게 복잡해짐</li>
<li>관련 없는 컴포넌트가 데이터 전달 책임을 가지게 됨</li>
</ul>
<p><strong>전역 상태 관리 불가능</strong></p>
<p>애플리케이션 전체에서 필요한 데이터(사용자 인증, 전역 설정 등)를 관리하기 어렵습니다.</p>
<h3 id="pinia_5">Pinia의 장점과 한계</h3>
<h4 id="_16">장점</h4>
<ul>
<li>여러 컴포넌트 간 상태 공유 용이</li>
<li>중앙 집중식 상태 관리</li>
<li>TypeScript 지원</li>
<li>개발자 도구 지원</li>
</ul>
<h4 id="_17">한계점</h4>
<p><strong>과도한 전역 상태</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 모든 것을 Store에 넣으면 안 됨</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">useFormStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">defineStore</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tempInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// ❌ 임시 입력값</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">isModalOpen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// ❌ 로컬 UI 상태</span>
<span class="p">});</span>
</code></pre></div>

<p><strong>컴포넌트 간 결합도 증가</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Button.vue - 재사용 불가</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">setup</span><span class="o">&gt;</span>
<span class="w">  </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">useAppStore</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/stores/app&#39;</span><span class="w"> </span><span class="c1">// 특정 스토어에 종속 const store =</span>
<span class="w">  </span><span class="nx">useAppStore</span><span class="p">()</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>

<h2 id="_18">실제 사용 예시</h2>
<h3 id="props">비효율적인 방법 (Props만 사용)</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">Dashboard</span><span class="w"> </span><span class="o">:</span><span class="nx">equipments</span><span class="o">=</span><span class="s2">&quot;equipments&quot;</span><span class="w"> </span><span class="err">@</span><span class="nx">update</span><span class="o">=</span><span class="s2">&quot;updateEquipment&quot;</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">EquipmentList</span><span class="w"> </span><span class="o">:</span><span class="nx">equipments</span><span class="o">=</span><span class="s2">&quot;equipments&quot;</span><span class="w"> </span><span class="err">@</span><span class="nx">update</span><span class="o">=</span><span class="s2">&quot;$emit(&#39;update&#39;, $event)&quot;</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">EquipmentCard</span>
<span class="w">        </span><span class="nx">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">&quot;eq in equipments&quot;</span>
<span class="w">        </span><span class="o">:</span><span class="nx">equipment</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span>
<span class="w">        </span><span class="err">@</span><span class="nx">update</span><span class="o">=</span><span class="s2">&quot;$emit(&#39;update&#39;, $event)&quot;</span>
<span class="w">      </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/EquipmentList&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/Dashboard&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>
</code></pre></div>

<h3 id="pinia_6">효율적인 방법 (Pinia 사용)</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">Dashboard</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"> </span><span class="c">&lt;!--</span><span class="w"> </span><span class="nx">각</span><span class="w"> </span><span class="nx">컴포넌트가</span><span class="w"> </span><span class="nx">독립적으로</span><span class="w"> </span><span class="nx">Store</span><span class="w"> </span><span class="nx">접근</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>
</code></pre></div>

<h2 id="_19">결론</h2>
<p>Pinia와 Props/Emit은 서로 다른 목적과 사용 사례를 가지고 있어 <strong>완전히 대체할 수 없습니다</strong>. 각 방법의 고유한 장점을 활용하여 상황에 맞게 사용하는 것이 가장 효과적입니다.</p>
<h3 id="_20">균형 잡힌 접근법</h3>
<ul>
<li><strong>Props/Emit</strong>: 컴포넌트별 로컬 데이터 전달과 이벤트 처리</li>
<li><strong>Pinia</strong>: 전역 상태 관리와 복잡한 상태 로직</li>
<li><strong>Provide/Inject</strong>: 깊은 계층 구조에서의 특정 데이터 공유</li>
</ul>
<p>이러한 방식으로 Pinia를 사용하면 애플리케이션의 상태를 체계적으로 관리할 수 있으며, 컴포넌트 간 데이터 공유가 매우 간단해집니다. 특히 Composition API 스타일로 작성하면 더 직관적이고 유지보수가 용이한 코드를 작성할 수 있습니다.</p>
<h2 id="_21">참고 자료</h2>
<ul>
<li><a href="https://pinia.vuejs.org/">Pinia 공식 문서</a></li>
<li><a href="https://vuejs.org/guide/extras/composition-api-faq.html">Vue 3 Composition API 가이드</a></li>
<li><a href="https://pinia.vuejs.kr/">Pinia 한국어 문서</a></li>
</ul>
</body>
</html>